<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stack Game + AdsGram</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: #f4f4f4; height: 100vh; display: flex; flex-direction: column; }
    .page { flex: 1; display: none; overflow-y: auto; }
    .page.active { display: block; }
    .menu { display: flex; justify-content: space-around; border-top: 1px solid #ccc; background: #fff; padding: 10px 0; }
    .menu button { flex: 1; background: none; border: none; font-size: 20px; cursor: pointer; }
    .menu button.active { color: green; font-weight: bold; }

    /* --- –ì—Ä–∞ --- */
    #container canvas { position: absolute !important; top: 0; left: 0; width: 100% !important; height: 100% !important; z-index: 1; }
    #scoreboard { position: absolute; top: 10px; left: 10px; display: flex; gap: 10px; z-index: 2; }
    #score, #highscore { background: rgba(0,0,0,0.5); color: #fff; padding: 5px 10px; border-radius: 6px; }
    #instructions { position: absolute; top: 50px; left: 10px; color: #000; font-size: 16px; background: rgba(255,255,255,0.7); padding: 4px 8px; border-radius: 6px; z-index: 2; }
    .game-over, .ready { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; background: rgba(255,255,255,0.95); padding: 20px; border-radius: 10px; display: none; z-index: 3; }
    #start-button { font-size: 20px; padding: 10px 20px; background: green; color: #fff; border-radius: 8px; cursor: pointer; }

    /* --- –ö–æ–Ω—Ç–µ–Ω—Ç–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ --- */
    .content-box { padding: 20px; }
    .balance { font-size: 24px; font-weight: bold; margin-top: 10px; }
    .task-list, .friends-list, .leaderboard { list-style: none; padding: 0; }
    .task-list li, .friends-list li, .leaderboard li {
      background: #fff; padding: 12px; margin: 8px 0; border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
  </style>

  <!-- Three.js + GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <!-- AdsGram SDK -->
  <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
</head>
<body>

  <!-- üéÆ –ì—Ä–∞ -->
  <div id="game" class="page active">
    <div id="container">
      <div id="scoreboard">
        <div id="score">0</div>
        <div id="highscore">üèÜ 0</div>
      </div>
      <div id="instructions">–ö–ª—ñ–∫ –∞–±–æ –ø—Ä–æ–±—ñ–ª, —â–æ–± –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –±–ª–æ–∫</div>
      <div class="game-over">
        <h2>–ì—Ä–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–∞</h2>
        <p>–ö–ª—ñ–∫–Ω–∏ –∞–±–æ –Ω–∞—Ç–∏—Å–Ω–∏ –ø—Ä–æ–±—ñ–ª, —â–æ–± –ø–æ—á–∞—Ç–∏ –∑–Ω–æ–≤—É</p>
      </div>
      <div class="ready">
        <div id="start-button">‚ñ∂ –°—Ç–∞—Ä—Ç</div>
      </div>
    </div>
  </div>

  <!-- üí∞ –ë–∞–ª–∞–Ω—Å -->
  <div id="balance" class="page">
    <div class="content-box">
      <h2>üí∞ –ë–∞–ª–∞–Ω—Å</h2>
      <p class="balance">–¢–≤–æ—ó –º–æ–Ω–µ—Ç–∏: <span id="coins">0</span></p>
    </div>
  </div>

  <!-- üèÜ –õ—ñ–¥–µ—Ä–±–æ—Ä–¥ -->
  <div id="leaderboard" class="page">
    <div class="content-box">
      <h2>üèÜ –õ—ñ–¥–µ—Ä–±–æ—Ä–¥</h2>
      <ul class="leaderboard" id="leaderboard-list">
        <li>1. –¢–∏ ‚Äî <span id="lb-score">0</span> –æ—á–æ–∫</li>
        <li>2. –ì—Ä–∞–≤–µ—Ü—å_123 ‚Äî 15 –æ—á–æ–∫</li>
        <li>3. TestUser ‚Äî 10 –æ—á–æ–∫</li>
      </ul>
    </div>
  </div>

  <!-- üë• –î—Ä—É–∑—ñ -->
  <div id="friends" class="page">
    <div class="content-box">
      <h2>üë• –î—Ä—É–∑—ñ</h2>
      <ul class="friends-list">
        <li>+ –ó–∞–ø—Ä–æ—Å–∏ –¥—Ä—É–≥–∞ —Ç–∞ –æ—Ç—Ä–∏–º–∞–π 50 –º–æ–Ω–µ—Ç</li>
        <li>–î—Ä—É–∑—ñ –∑ Telegram –ø—ñ–¥—Ç—è–≥—É—é—Ç—å—Å—è —Å—é–¥–∏ (–º–æ–∂–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏)</li>
      </ul>
    </div>
  </div>

  <!-- üìã –ó–∞–≤–¥–∞–Ω–Ω—è -->
  <div id="tasks" class="page">
    <div class="content-box">
      <h2>üìã –ó–∞–≤–¥–∞–Ω–Ω—è</h2>
      <ul class="task-list">
        <li>üéØ –ü–µ—Ä–µ–≥–ª—è–Ω—å —Ä–µ–∫–ª–∞–º—É ( +10 –º–æ–Ω–µ—Ç )</li>
        <li>üéÆ –ù–∞–±–µ—Ä–∏ 20 –æ—á–æ–∫ —É –≥—Ä—ñ ( +20 –º–æ–Ω–µ—Ç )</li>
        <li>üî• –ó–∞–ø—Ä–æ—Å–∏ –¥—Ä—É–≥–∞ ( +30 –º–æ–Ω–µ—Ç )</li>
      </ul>
    </div>
  </div>

  <!-- –ú–µ–Ω—é -->
  <div class="menu">
    <button onclick="showPage('game', this)" class="active">üéÆ</button>
    <button onclick="showPage('balance', this)">üí∞</button>
    <button onclick="showPage('leaderboard', this)">üèÜ</button>
    <button onclick="showPage('friends', this)">üë•</button>
    <button onclick="showPage('tasks', this)">üìã</button>
  </div>

  <script>
    // === AdsGram init ===
    const AdController = window.Adsgram.init({ blockId: "int-13878" });

    let coins = localStorage.getItem("coins") ? parseInt(localStorage.getItem("coins")) : 0;
    document.getElementById("coins").innerText = coins;

    let highscore = localStorage.getItem("highscore") ? parseInt(localStorage.getItem("highscore")) : 0;
    document.getElementById("highscore").innerText = "üèÜ " + highscore;
    document.getElementById("lb-score").innerText = highscore;

    function updateHighscore(currentScore) {
      if (currentScore > highscore) {
        highscore = currentScore;
        localStorage.setItem("highscore", highscore);
        document.getElementById("highscore").innerText = "üèÜ " + highscore;
        document.getElementById("lb-score").innerText = highscore;
      }
    }

    function addCoins(amount) {
      coins += amount;
      localStorage.setItem("coins", coins);
      document.getElementById("coins").innerText = coins;
    }

    function showPage(id, btn) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelectorAll('.menu button').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
    }

    // === –î–∞–ª—ñ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –ª–æ–≥—ñ–∫–∞ –≥—Ä–∏ (—Ç–æ–π —Å–∞–º–∏–π –∫–æ–¥ –∑ three.js —è–∫ –º–∏ —Ä–æ–±–∏–ª–∏ –≤–∏—â–µ) ===
    // init(), addLayer(), addOverhang(), eventHandler(), endGame() —ñ —Ç.–¥.
    // ...
  </script>
</body>
</html>
